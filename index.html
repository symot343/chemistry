<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>é«˜ï¼’åŒ–å­¦æœŸæœ«</title>
    <link rel="stylesheet" href="chemistry.css">
</head>

<body>
<h1>ç‰©è³ª è‰²å½“ã¦ã‚¯ã‚¤ã‚º</h1>
<div class="explanation">
    <details open>
        <summary>èª¬æ˜</summary>
        <p>Startã§é–‹å§‹ã€åŒ–å­¦ç‰©è³ªåãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚
            <br>é¸æŠè‚¢ã‹ã‚‰è‰²ã‚’å½“ã¦ã‚‹ã€‚
            <br>10å•æ­£è§£ã™ã‚‹ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚’ç«¶ã†ã€‚
            <br>æ­£è§£ã®è¡¨ç¤ºã¯å‡ºã¾ã›ã‚“ã€‚
        </p>
    </details>
</div>

<div>
    <p>ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ å…¥åŠ›æ¬„</p>
    <p class="expl">guestã®ã¾ã¾ã ã¨é›†è¨ˆã•ã‚Œã¾ã›ã‚“</p>
    <input type="text" id="name_input" value="guest">
</div>

<div class="start_button">
    <input type="button" id="start_button" value="Start"
    style="width:64px;height:32px;bottom:5px;position:relative">
    <p>
    <div id="problem_num">ç¬¬0å•</div>
    <div id="score">0</div>
    <div id="correct">âœ…ï¼š0</div>
    <div id="wrong">âï¼š0</div>
    </p>
    <p id="status">é–‹å§‹å‰</p>
</div>


<div id="timer">00:00.000</div>

<div class="problem_space"
style="padding:10px;margin-bottom:10px;border:1px solid #333333">
    <p id="problem">å•é¡Œ</p>
    <hr>
    <p id="problem_sub">ã‚‚ã‚“ã ã„</p>
</div>

<div class="next_button">
    <input type="button" id="next_button" value="Next"
    style="width:64px;height:32px;bottom:5px;position:relative">
</div>

<div class="choice_buttons">
    <p>ã€é¸æŠè‚¢ã€‘</p>
    <input type="button" onclick="choiceButtonClick(this.id)" id="choice1" class="choice" value="èµ¤ç´«è‰²">
    <input type="button" onclick="choiceButtonClick(this.id)" id="choice2" class="choice" value="é»’è‰²">
    <input type="button" onclick="choiceButtonClick(this.id)" id="choice3" class="choice" value="é»„ç·‘è‰²">
    <input type="button" onclick="choiceButtonClick(this.id)" id="choice4" class="choice" value="ç„¡è‰²">
    <input type="button" onclick="choiceButtonClick(this.id)" id="choice5" class="choice" value="é’ç™½è‰²">
    <input type="button" onclick="choiceButtonClick(this.id)" id="choice6" class="choice" value="èµ¤è‰²">
    <input type="button" onclick="choiceButtonClick(this.id)" id="choice7" class="choice" value="èµ¤æ©™è‰²">
    <input type="button" onclick="choiceButtonClick(this.id)" id="choice8" class="choice" value="éŠ€ç™½è‰²">
    <input type="button" onclick="choiceButtonClick(this.id)" id="choice9" class="choice" value="ç™½è‰²">
</div>

<div class="button-container">
    <label class="button-sample1" for="popupFlag1">çµæœã‚’è¡¨ç¤º</label>
</div>
<!--popup1-->
<input type="checkbox" class="popup-flag" id="popupFlag1">
<label class="popup-background" for="popupFlag1"></label>
<div class="popup">
    <label class="close-button" for="popupFlag1">Ã—</label>
    <div class="content">
        <h3>çµæœ</h3>
        <h5>æ­£ç­”æ•°</h5>
        <h4 class="h4" id="solved_display">0/0å•(0%)</h4>
        <h5>å¾—ç‚¹</h5>
        <h4 class="h4" id="score_display">0</h4>
        ã“ã®çµæœã‚’LINEã§ã‚·ã‚§ã‚¢ã—ã‚ˆã†
    </div>
</div>

<div class="center">
<div class="line-it-button" data-lang="ja" data-type="share-a" data-env="REAL"
    data-url="https://symot343.github.io/chemistry/"
    data-color="default" data-size="large" data-count="false" data-ver="3" style="display: none;"></div>
<script src="https://www.line-website.com/social-plugins/js/thirdparty/loader.min.js" async="async"
    defer="defer"></script>
</div>

<div>
    <p>ã€å•é¡Œä¸€è¦§ã€‘</p>
    <table id="wrong_answers">
        <tr class="rowA">
            <th>å•é¡Œ</th>
            <th>åŒ–å­¦å¼</th>
            <th>ã‚ãªãŸã®å›ç­”</th>
            <th>è§£ç­”</th>
        </tr>
    </table>
</div>

<div>
    <p>ğŸ‘‘ğŸ‘‘ğŸ‘‘ãƒ©ãƒ³ã‚­ãƒ³ã‚°ğŸ‘‘ğŸ‘‘ğŸ‘‘</p>
</div>

<div class="table">
    <table>
        <tr class="rowA">
            <th>é †ä½</th>
            <th>åå‰</th>
            <th>å¾—ç‚¹</th>
        </tr>
        <tr class="rowE">
            <td>1</td>
            <td id="name1">åå‰</td>
            <td id="score1">å¾—ç‚¹</td>
        </tr>
        <tr class="rowF">
            <td>2</td>
            <td id="name2">åå‰</td>
            <td id="score2">å¾—ç‚¹</td>
        </tr>
        <tr class="rowE">
            <td>3</td>
            <td id="name3">åå‰</td>
            <td id="score3">å¾—ç‚¹</td>
        </tr>
        <tr class="rowF">
            <td>4</td>
            <td id="name4">åå‰</td>
            <td id="score4">å¾—ç‚¹</td>
        </tr>
        <tr class="rowE">
            <td>5</td>
            <td id="name5">åå‰</td>
            <td id="score5">å¾—ç‚¹</td>
        </tr>
        <tr class="rowF">
            <td>6</td>
            <td id="name6">åå‰</td>
            <td id="score6">å¾—ç‚¹</td>
        </tr>
        <tr class="rowE">
            <td>7</td>
            <td id="name7">åå‰</td>
            <td id="score7">å¾—ç‚¹</td>
        </tr>
        <tr class="rowF">
            <td>8</td>
            <td id="name8">åå‰</td>
            <td id="score8">å¾—ç‚¹</td>
        </tr>
        <tr class="rowE">
            <td>9</td>
            <td id="name9">åå‰</td>
            <td id="score9">å¾—ç‚¹</td>
        </tr>
        <tr class="rowF">
            <td>10</td>
            <td id="name10">åå‰</td>
            <td id="score10">å¾—ç‚¹</td>
        </tr>
    </table>

</div>

<script>
    //idå–å¾—ç¾¤
    let start_button = document.getElementById("start_button");
    let quit_button = document.getElementById("quit_button");
    let problem_num = document.getElementById("problem_num");
    let correct = document.getElementById("correct");
    let wrong = document.getElementById("wrong");
    let status = document.getElementById("status");
    let score = document.getElementById("score");
    let next_button = document.getElementById("next_button");
    let problem = document.getElementById("problem");
    let problem_sub = document.getElementById("problem_sub");
    let timer = document.getElementById("timer");
    let wrong_answers = document.getElementById("wrong_answers");
    let solved_display = document.getElementById("solved_display");
    let score_display = document.getElementById("score_display");
    let name_input = document.getElementById("name_input");
    //å€¤å®šç¾©ç¾¤
    let start_status = false;
    let next_status = false;
    let gameover_status = false;
    let answer = "ç„¡è‰²";
    let startTime;
    let timeoutID;
    let stopTime=0;
    let gameTime = 10000
    let givenTime = 0;
    //åå‰
    let name = localStorage.getItem("myname");
    if (name == null) {
        name = "guest";
    }
    if (name == "") {
        name = "guest";
    }
    name_input.value = name;
    //ãƒ©ãƒ³ã‚­ãƒ³ã‚°å‡¦ç†
    let ranking = {};
    fetch('https://script.google.com/macros/s/AKfycbwC4EySoHPpFf-XL3HL-fZNxh7C-6kYgKtcH1QKjHC7ZZMKb0IYUJ3ZyoQ9o1YmbSvi/exec')
            .then(response => response.json())
            .then(data => {
                data.sort((a, b) => b.score - a.score);
                console.log(data); // ã‚·ãƒ¼ãƒˆã®ãƒ‡ãƒ¼ã‚¿ãŒJSONå½¢å¼ã§è¡¨ç¤ºã•ã‚Œã¾ã™
                ranking = data;
                //ã“ã“ã§ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã®è¡¨ç¤ºã¾ã§ã‚„ã£ã¦ã—ã¾ã†
                for (let i = 1; i <= 10; i++) {
                    let the_name = document.getElementById("name" + String(i));
                    the_name.textContent = data[i - 1].name;
                    let the_score = document.getElementById("score" + String(i));
                    the_score.textContent = data[i - 1].score;
                }
            })
            .catch(error => console.error('Error fetching data:', error));
    console.log(ranking)
    //å•é¡Œé›†jsonã—ãŸã„
    let questions = [
        { id: 0, name: "é»’é‰›", formula: "C", color: "é»’è‰²" },
        { id: 1, name: "ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰", formula: "C", color: "ç„¡è‰²" },
        { id: 2, name: "ä¸€é…¸åŒ–ç‚­ç´ ", formula: "CO", color: "ç„¡è‰²" },
        { id: 3, name: "äºŒé…¸åŒ–ç‚­ç´ ", formula: "CO2", color: "ç„¡è‰²" },
        { id: 4, name: "ãƒªãƒã‚¦ãƒ ã®ç‚è‰²åå¿œ", formula: "Li flame", color: "èµ¤è‰²" },
        { id: 5, name: "ãƒŠãƒˆãƒªã‚¦ãƒ ã®ç‚è‰²åå¿œ", formula: "Na flame", color: "é»„è‰²" },
        { id: 6, name: "ã‚«ãƒªã‚¦ãƒ ã®ç‚è‰²åå¿œ", formula: "K flame", color: "èµ¤ç´«è‰²" },
        { id: 7, name: "éŠ…ã®ç‚è‰²åå¿œ", formula: "Cu flame", color: "é’ç·‘è‰²" },
        { id: 8, name: "ãƒãƒªã‚¦ãƒ ã®ç‚è‰²åå¿œ", formula: "Ba flame", color: "é»„ç·‘è‰²" },
        { id: 9, name: "ã‚«ãƒ«ã‚·ã‚¦ãƒ ã®ç‚è‰²åå¿œ", formula: "Ca flame", color: "æ©™èµ¤è‰²" },
        { id: 10, name: "ã‚¹ãƒˆãƒ­ãƒ³ãƒã‚¦ãƒ ã®ç‚è‰²åå¿œ", formula: "Sr flame", color: "ç´…è‰²" },
        { id: 11, name: "ãƒ•ãƒƒç´ ", formula: "F2", color: "æ·¡é»„è‰²" },
        { id: 12, name: "ãƒ•ãƒƒåŒ–æ°´ç´ ", formula: "HF", color: "ç„¡è‰²" },
        { id: 13, name: "å¡©ç´ ", formula: "Cl2", color: "é»„ç·‘è‰²" },
        { id: 14, name: "å¡©åŒ–æ°´ç´ ", formula: "HCl", color: "ç„¡è‰²" },
        { id: 15, name: "è‡­ç´ ", formula: "Br2", color: "èµ¤è¤è‰²" },
        { id: 16, name: "ãƒ¨ã‚¦ç´ ", formula: "I2", color: "é»’ç´«è‰²" },
        { id: 17, name: "é…¸ç´ ", formula: "O2", color: "ç„¡è‰²" },
        { id: 18, name: "ã‚ªã‚¾ãƒ³", formula: "O3", color: "æ·¡é’è‰²" },
        { id: 19, name: "ç¡«é»„", formula: "S", color: "é»„è‰²" },
        { id: 20, name: "ç¡«é»„ã®ç‡ƒç„¼æ™‚ã®ç‚", formula: "S flame", color: "é’è‰²" },
        { id: 21, name: "ç¡«åŒ–æ°´ç´ ", formula: "H2S", color: "ç„¡è‰²" },
        { id: 22, name: "ç¡«åŒ–ã‚«ãƒ‰ãƒŸã‚¦ãƒ ", formula: "CdS", color: "é»„è‰²" },
        { id: 23, name: "ç¡«åŒ–ãƒãƒ³ã‚¬ãƒ³", formula: "MnS", color: "æ·¡æ¡ƒè‰²" },
        { id: 24, name: "ç¡«åŒ–äºœé‰›", formula: "ZnS", color: "ç™½è‰²" },
        { id: 25, name: "ç¡«åŒ–é‰„", formula: "FeS", color: "ç„¡è‰²" },
        { id: 26, name: "ç¡«åŒ–éŠ…", formula: "CuS", color: "é»’è‰²" },
        { id: 28, name: "äºŒé…¸åŒ–ç¡«é»„", formula: "SO2", color: "ç„¡è‰²" },
        { id: 29, name: "ä¸‰é…¸åŒ–ç¡«é»„", formula: "SO3", color: "ç„¡è‰²" },
        { id: 30, name: "çª’ç´ ", formula: "N2", color: "ç„¡è‰²" },
        { id: 31, name: "ã‚¢ãƒ³ãƒ¢ãƒ‹ã‚¢", formula: "NH3", color: "ç„¡è‰²" },
        { id: 32, name: "ä¸€é…¸åŒ–çª’ç´ ", formula: "NO", color: "ç„¡è‰²" },
        { id: 33, name: "äºŒé…¸åŒ–çª’ç´ ", formula: "NO2", color: "èµ¤è¤è‰²" },
        { id: 34, name: "å››é…¸åŒ–äºŒçª’ç´ ", formula: "N2O4", color: "ç„¡è‰²" },
        { id: 35, name: "ç¡é…¸", formula: "HNO3", color: "ç„¡è‰²" },
        { id: 36, name: "ã‚¢ãƒ«ãƒŸãƒ‹ã‚¦ãƒ ", formula: "Al", color: "éŠ€ç™½è‰²" },
        { id: 37, name: "ãƒŸãƒ§ã‚¦ãƒãƒ³", formula: "AlK(SO4)2ãƒ»12H2O", color: "ç„¡è‰²" },
        { id: 38, name: "äºœé‰›", formula: "Zn", color: "éŠ€ç™½è‰²" },
        { id: 39, name: "ã‚¹ã‚º", formula: "Sn", color: "éŠ€ç™½è‰²" },
        { id: 40, name: "é‰›", formula: "Pb", color: "æš—ç°è‰²" },
        { id: 41, name: "å¡©åŒ–é‰›", formula: "PbCl2", color: "ç™½è‰²" },
        { id: 42, name: "ç¡«åŒ–é‰›", formula: "PbS", color: "é»’è‰²" },
        { id: 43, name: "æ°´é…¸åŒ–é‰›", formula: "Pb(OH)2", color: "ç™½è‰²" },
        { id: 44, name: "ç¡«é…¸é‰›", formula: "PbSO4", color: "ç™½è‰²" },
        { id: 45, name: "ã‚¯ãƒ­ãƒ é…¸é‰›(II)", formula: "PbCrO4", color: "é»„è‰²" },
        { id: 46, name: "ãƒ¨ã‚¦åŒ–é‰›", formula: "PbI2", color: "é»„è‰²" },
        { id: 47, name: "é‰„", formula: "Fe", color: "ç°ç™½è‰²" },
        { id: 48, name: "é…¸åŒ–é‰„(III)", formula: "Fe2O3", color: "èµ¤è‰²" },
        { id: 49, name: "å››é…¸åŒ–ä¸‰é‰„", formula: "Fe3O4", color: "é»’è‰²" },
        { id: 50, name: "æ°´é…¸åŒ–é‰„(II)", formula: "Fe(OH)2", color: "ç·‘ç™½è‰²" },
        { id: 51, name: "æ°´é…¸åŒ–é‰„(III)", formula: "Fe(OH)3", color: "èµ¤è¤è‰²" },
        { id: 52, name: "ç¡«é…¸é‰„(II)+ãƒ˜ã‚­ã‚µã‚·ã‚¢ãƒ‹ãƒ‰é‰„(III)é…¸ã‚«ãƒªã‚¦ãƒ æ°´æº¶æ¶²", formula: "FeSO4+K3[Fe(CN)6]", color: "æ¿ƒé’è‰²" },
        { id: 53, name: "å¡©åŒ–é‰„(III)+ãƒ˜ã‚­ã‚µã‚·ã‚¢ãƒ‹ãƒ‰é‰„(II)é…¸ã‚«ãƒªã‚¦ãƒ æ°´æº¶æ¶²", formula: "FeCl3+K4[Fe(CN)6]", color: "æ¿ƒé’è‰²" },
        { id: 54, name: "å¡©åŒ–é‰„(III)+ãƒã‚ªã‚·ã‚¢ãƒ³é…¸ã‚«ãƒªã‚¦ãƒ æ°´æº¶æ¶²", formula: "FeCl3+KSCN", color: "è¡€èµ¤è‰²" },
        { id: 55, name: "ã‚ªã‚­ã‚·æ°´é…¸åŒ–é‰„", formula: "FeOOH", color: "è¤è‰²" },
        { id: 56, name: "é…¸åŒ–é‰„æ°´å’Œç‰©", formula: "Fe2O3ãƒ»nH2O", color: "è¤è‰²" },
        { id: 57, name: "é‰„(II)ã‚¤ã‚ªãƒ³+ãƒ˜ã‚­ã‚µã‚·ã‚¢ãƒ‹ãƒ‰é‰„(II)é…¸ã‚«ãƒªã‚¦ãƒ æ°´æº¶æ¶²", formula: "Fe2++K4[Fe(CN)6]", color: "æ·±é’è‰²" },
        { id: 58, name: "é‰„(III)ã‚¤ã‚ªãƒ³+ãƒ˜ã‚­ã‚µã‚·ã‚¢ãƒ‹ãƒ‰é‰„(III)é…¸ã‚«ãƒªã‚¦ãƒ æ°´æº¶æ¶²", formula: "Fe3++K3[Fe(CN)6]", color: "æš—è¤è‰²" },
        { id: 59, name: "ç¡«åŒ–é‰„", formula: "FeS", color: "é»’è‰²" },
        { id: 60, name: "éŠ…", formula: "Cu", color: "èµ¤è‰²" },
        { id: 61, name: "é…¸åŒ–éŠ…(I)", formula: "Cu2O", color: "èµ¤è‰²" },
        { id: 62, name: "é…¸åŒ–éŠ…(II)", formula: "CuO", color: "é»’è‰²" },
        { id: 63, name: "æ°´é…¸åŒ–éŠ…(II)", formula: "Cu(OH)2", color: "é’ç™½è‰²" },
        { id: 64, name: "æ°´é…¸åŒ–éŠ…(II)+ã‚¢ãƒ³ãƒ¢ãƒ‹ã‚¢æ°´", formula: "Cu(OH)2+NH3", color: "æ·¡é’è‰²" },
        { id: 65, name: "ç¡«é…¸éŠ…(II)", formula: "CuSO4", color: "ç™½è‰²" },
        { id: 66, name: "ç¡«é…¸éŠ…(II)äº”æ°´å’Œç‰©", formula: "CuSO4ãƒ»5H2O", color: "é’è‰²" },
        { id: 67, name: "éŠ€", formula: "Ag", color: "éŠ€ç™½è‰²" },
        { id: 68, name: "é…¸åŒ–éŠ€", formula: "Ag2O", color: "è¤è‰²" },
        { id: 69, name: "å¡©åŒ–éŠ€", formula: "AgCl", color: "ç™½è‰²" },
        { id: 70, name: "è‡­åŒ–éŠ€", formula: "AgBr", color: "æ·¡é»„è‰²" },
        { id: 71, name: "ãƒ¨ã‚¦åŒ–éŠ€", formula: "AgI", color: "é»„è‰²" },
        { id: 72, name: "é‡‘", formula: "Au", color: "é»„é‡‘è‰²" },
        { id: 73, name: "ã‚¯ãƒ­ãƒ ", formula: "Cr", color: "éŠ€ç™½è‰²" },
        { id: 74, name: "ã‚¯ãƒ­ãƒ é…¸ã‚«ãƒªã‚¦ãƒ ", formula: "K2CrO4", color: "é»„è‰²" },
        { id: 75, name: "ã‚¯ãƒ­ãƒ é…¸ã‚¤ã‚ªãƒ³", formula: "CrO42-", color: "é»„è‰²" },
        { id: 76, name: "ã‚¯ãƒ­ãƒ é…¸éŠ€", formula: "Ag2CrO4", color: "èµ¤è¤è‰²" },
        { id: 77, name: "ã‚¯ãƒ­ãƒ é…¸ãƒãƒªã‚¦ãƒ ", formula: "BaCrO4", color: "æ·¡é»„è‰²" },
        { id: 78, name: "äºŒã‚¯ãƒ­ãƒ é…¸ã‚¤ã‚ªãƒ³", formula: "Cr2O7-", color: "èµ¤æ©™è‰²" },
        { id: 79, name: "ãƒãƒ³ã‚¬ãƒ³", formula: "Mn", color: "éŠ€ç™½è‰²" },
        { id: 80, name: "é…¸åŒ–ãƒãƒ³ã‚¬ãƒ³(IV)", formula: "MnO2", color: "é»’è‰²" },
        { id: 81, name: "éãƒãƒ³ã‚¬ãƒ³é…¸ã‚«ãƒªã‚¦ãƒ ", formula: "KMnO4", color: "é»’ç´«è‰²" },
        { id: 82, name: "éãƒãƒ³ã‚¬ãƒ³é…¸ã‚¤ã‚ªãƒ³", formula: "MnO4-", color: "èµ¤ç´«è‰²" },
        { id: 83, name: "æ°´é…¸åŒ–ã‚¢ãƒ«ãƒŸãƒ‹ã‚¦ãƒ ", formula: "Al(OH)3", color: "ç™½è‰²" },
    ]
    //ã“ã“ã§å…¨ã¦ã®è‰²ã®åå‰ã‚’ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—
    let color_code = {
        "é»’è‰²":["#000000",0],
        "ç„¡è‰²":["#ffffff",1],
        "èµ¤è‰²":["#ff0000",0],
        "é»„è‰²":["#ffff00",1],
        "èµ¤ç´«è‰²":["#c54ea0",0],
        "é’ç·‘è‰²":["#00a497",0],
        "é»„ç·‘è‰²":["#b8d200",1],
        "æ©™èµ¤è‰²":["#ea5506",0],
        "ç´…è‰²":["#d7003a",0],
        "æ·¡é»„è‰²":["#f8e58c",1],
        "èµ¤è¤è‰²":["#683f36",0],
        "é»’ç´«è‰²":["#3e0014",0],
        "æ·¡é’è‰²":["#abe1fa",1],
        "é’è‰²":["#0095d9",0],
        "ç™½è‰²":["#ffffff",1],
        "æ·¡æ¡ƒè‰²":["#fadce9",1],
        "éŠ€ç™½è‰²":["#f6f6f6",1],
        "æš—ç°è‰²":["#72777b",0],
        "ç°ç™½è‰²":["#e9e4d4",1],
        "ç·‘ç™½è‰²":["#d6e9ca",1],
        "æ¿ƒé’è‰²":["#010066",0],
        "è¡€èµ¤è‰²":["#d20a13",0],
        "è¤è‰²":["#8a3b00",0],
        "æ·±é’è‰²":["#1b0066",0],
        "æš—è¤è‰²":["#270809",0],
        "é’ç™½è‰²":["#cee9f2",1],
        "æ·¡é»„è‰²":["#f8e58c",1],
        "é»„é‡‘è‰²":["#e6b422",1],
        "èµ¤æ©™è‰²":["#ea5506",0]
    };
    let color_list = [];
    for (let key in color_code){
        color_list.push(key);
    }
    function startButtonClick(){
        if (start_status){
            alert("ã™ã§ã«å§‹ã¾ã£ã¦ã„ã¾ã™")
        }else{
            start_status = true;
            name = name_input.value;
            localStorage.setItem("myname", name)
            startTime = Date.now();
            console.log(startTime)
            displayTime();
            status.textContent = "å›ç­”ä¸­";
            //å‡ºé¡Œé–‹å§‹
            giveQuestion();
        }
    }
    start_button.onclick = startButtonClick;
    function nextButtonClick(){
        if (next_status){
            next_status = false;
            //å‡ºé¡Œ
            giveQuestion();
        }else{
            alert("ã¾ãšã¯ä»Šã®å•é¡Œ");
        }
    }
    next_button.onclick = nextButtonClick;
    //è‰²å¡—ã‚Š
    function colorButton(id,c){
        let b = document.getElementById(id);
        b.style.background = color_code[c][0];
        if (color_code[c][1]){
            b.style.color = "black";
        }else{
            b.style.color = "white";
        }
        b.value = c;
        b.style.border = "1px solid black"
    }
    let str = questions[36]
    problem.textContent = str.formula;
    problem_sub.textContent = str.name;
    problem.style.fontSize = "30px";
    problem_sub.style.fontSize = "20px";
    function giveQuestion(){
        givenTime = Date.now();
        //å•é¡Œç•ªå·ã‚’å¢—ã‚„ã™
        let str = problem_num.textContent;
        let num = Number(str.substring(1,str.length-1))+1;
        problem_num.textContent = "ç¬¬"+String(num)+"å•";
        let index = Math.floor(Math.random()*questions.length);
        let question = questions[index];
        console.log(question)
        problem.textContent = question.formula;
        problem_sub.textContent = question.name;
        //æ–‡å­—ã‚µã‚¤ã‚ºã‚’æŒ‡å®šã—ã¦ã„ã“ã†
        if (question.formula.length >= 15){
            problem.style.fontSize = "30px";
        }else if (question.formula.length>=10){
            problem.style.fontSize = "40px";
        }else{
            problem.style.fontSize = "60px";
        }
        if (question.name.length>=15){
            problem_sub.style.fontSize = "20px";
        }
        //ç­”ãˆã®é¸æŠè‚¢ã‚’ã‚»ãƒƒãƒˆ
        answer = question.color;
        //ï¼•å€‹é¸ã‚“ã§ã‹ã‚‰ç­”ãˆã¨å·®ã—æ›¿ãˆã‚Œã°ã„ã„ã˜ã‚ƒã‚“
        let color_list_copy = structuredClone(color_list);
        let choice_list = []
        for (let i=0;i<9;i++){
            let num = Math.floor(Math.random()*color_list_copy.length);
            choice_list.push(color_list_copy[num]);
            color_list_copy.splice(num,1);
        }
        console.log(answer)
        if (!choice_list.includes(answer)){
            choice_list[Math.floor(Math.random() * 9)] = answer;
        }
        //é¸æŠè‚¢æº–å‚™å®Œäº†
        //è‰²å¡—ã‚Š
        for (let i=1;i<=9;i++){
            colorButton("choice"+String(i),choice_list[i-1]);
        }
    }
    function choiceButtonClick(id){
        if (gameover_status == true) {
            alert("ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„")
            return;
        }
        if (start_status == false) {
            alert("Startã‚’æŠ¼ã—ã¦ãã ã•ã„")
            return;
        }
        if (next_status == true) {
            alert("æ¬¡ã®å•é¡Œã¸")
            return;
        }
        let the_choice = document.getElementById(id);
        let guess = the_choice.value;
        the_choice.style.background = "white";
        the_choice.style.border = "2px solid " + color_code[guess][0];
        the_choice.style.color = "black";
        let ns = Number(score.textContent);
        let nm = problem_num.textContent;
        let prob_num = nm.substring(1, nm.length - 1);
        if (guess == answer) {
            let time = Date.now()-givenTime;
            time = time**(1-(time/100000));
            let add = Math.floor(1000*(5000/(time**0.6))*(prob_num**(0.3)));
            console.log(add);
            score.textContent = String(ns+add);
            str = correct.textContent;
            //è¿½åŠ 
            let new_element = document.createElement('tr');
            new_element.className = "rowB";
            let new_element_p = document.createElement('td');
            let new_element_s = document.createElement('td');
            let new_element_g = document.createElement('td');
            let new_element_a = document.createElement('td');
            new_element_p.textContent = problem.textContent;
            new_element_s.textContent = problem_sub.textContent;
            new_element_g.textContent = guess;
            new_element_a.textContent = answer;
            new_element.appendChild(new_element_p);
            new_element.appendChild(new_element_s);
            new_element.appendChild(new_element_g);
            new_element.appendChild(new_element_a);
            wrong_answers.appendChild(new_element);
            let num = Number(str.substring(2,str.length))+1;
            correct.textContent = "âœ…ï¼š"+String(num);
            giveQuestion();
        }
        else {
            let add = Math.floor(20000*(prob_num**0.8)*(-1));
            console.log(add);
            score.textContent = String(ns+add);
            let str = wrong.textContent;
            let num = Number(str.substring(2, str.length)) + 1;
            wrong.textContent = "âï¼š" + String(num);
            //è¿½åŠ 
            let new_element = document.createElement('tr');
            new_element.className = "rowC";
            let new_element_p = document.createElement('td');
            let new_element_s = document.createElement('td');
            let new_element_g = document.createElement('td');
            let new_element_a = document.createElement('td');
            new_element_p.textContent = problem.textContent;
            new_element_s.textContent = problem_sub.textContent;
            new_element_g.textContent = guess;
            new_element_a.textContent = answer;
            new_element.appendChild(new_element_p);
            new_element.appendChild(new_element_s);
            new_element.appendChild(new_element_g);
            new_element.appendChild(new_element_a);
            wrong_answers.appendChild(new_element);
            let send = "ä¸æ­£è§£ã€ç­”ãˆã¯" + answer + "ã§ã—ãŸ";
            alert(send);
            next_status = true;
        }
    }
    function displayTime(){
        const currentTime = new Date(gameTime-Date.now()+startTime);
        const h = String(currentTime.getHours()).padStart(2, '0');
        const m = String(currentTime.getMinutes()).padStart(2, '0');
        const s = String(currentTime.getSeconds()).padStart(2, '0');
        const ms = String(currentTime.getMilliseconds()).padStart(3, '0');
        timer.textContent = `${m}:${s}.${ms}`;
        if (m=="59"){
            clearTimeout(timeoutID);
            let score_send = score.textContent;
            console.log(score_send);
            console.log(name)
            fetch('https://script.google.com/macros/s/AKfycbwC4EySoHPpFf-XL3HL-fZNxh7C-6kYgKtcH1QKjHC7ZZMKb0IYUJ3ZyoQ9o1YmbSvi/exec', {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ name,score_send })
            })
                .then(response => response.text())
                .then(data => {
                });
            timer.textContent = "00:00.000";
            status.textContent = "çµ‚äº†";
            let str1 = correct.textContent;
            let num1 = Number(str1.substring(2,str1.length));
            let str2 = wrong.textContent;
            let num2 = Number(str2.substring(2,str2.length));
            solved_display.textContent = `${String(num1)}/${String(num1+num2)}å•(${String(Math.floor(num1/(num1+num2)*100))}%)`
            score_display.textContent = score.textContent;
            //è¿½åŠ 
            let new_element = document.createElement('tr');
            new_element.className = "rowD";
            let new_element_p = document.createElement('td');
            let new_element_s = document.createElement('td');
            let new_element_g = document.createElement('td');
            let new_element_a = document.createElement('td');
            new_element_p.textContent = problem.textContent;
            new_element_s.textContent = problem_sub.textContent;
            new_element_g.textContent = "no_guess";
            new_element_a.textContent = answer;
            new_element.appendChild(new_element_p);
            new_element.appendChild(new_element_s);
            new_element.appendChild(new_element_g);
            new_element.appendChild(new_element_a);
            alert("ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ã€çµæœã‚’ç¢ºèªã—ã¦ã­")
            gameover_status = true;
        }
        if (!gameover_status){
            timeoutID = setTimeout(displayTime, 10);
        }
    }
</script>

</body>
</html>